var vs_gesture=function(e,t){"use strict";const n={},r=["gesturestart","gesturechange","gestureend"];document.createElement("div");for(var i=0;i<r.length;i++){var o=r[i],s=(o="on"+o)in t.vsTestElem;s||(t.vsTestElem.setAttribute(o,"return;"),s="function"==typeof t.vsTestElem[o]),n[r[i]]=s}function a(e,t){if(!e||!t)return 0;var n=t.pageX-e.pageX,r=t.pageY-e.pageY;return Math.sqrt(n*n+r*r)}function u(e,t){return e&&t?180*Math.atan2(t.pageY-e.pageY,t.pageX-e.pageX)/Math.PI:0}n.gestures=n.gesturestart&&n.gesturechange&&n.gestureend,"MSGestureEvent"in window&&(n.msGestures=!0),n.gestures=!1,n.msGestures=!1;var c,E,d=0,g=0;function v(e){var t=e.length,n=0,r=0,i=0;if(0===t)return{X:0,y:0};for(;n<t;n++){var o=e[n];r+=o.pageX,i+=o.pageY}return{x:r/t-E.x,y:i/t-E.y}}function T(e,t){return[e.x-t.x,e.y-t.y]}var f=function(e,t){var n=t?void 0:v(e.targetPointerList);return{scale:t?void 0:a(e.targetPointerList[0],e.targetPointerList[1])/d,rotation:t?void 0:u(e.targetPointerList[0],e.targetPointerList[1])-g,translation:t?void 0:T(n,c),nbPointers:e.nbPointers,pointerList:e.pointerList,targetPointerList:e.targetPointerList,centroid:n,changedPointerList:e.changedPointerList}},l=!1,h=function(n,r){if(!(n.targetPointerList.length<2))if(n.preventDefault(),l)j(e.GESTURE_CHANGE,n.target,f(n));else{d=a(n.targetPointerList[0],n.targetPointerList[1]),g=u(n.targetPointerList[0],n.targetPointerList[1]);n.targetPointerList[0].target._comp_;E=t.getElementAbsolutePosition(n.targetPointerList[0].target,!0),c=v(n.targetPointerList),document.addEventListener(e.POINTER_MOVE,_),document.addEventListener(e.POINTER_END,P),document.addEventListener(e.POINTER_CANCEL,P),j(e.GESTURE_START,n.target,f(n)),l=!0}},_=function(t){t.preventDefault(),x(t,function(t){t.targetPointerList.length<2?(document.removeEventListener(e.POINTER_MOVE,_),document.removeEventListener(e.POINTER_END,P),document.removeEventListener(e.POINTER_CANCEL,P),l=!1,j(e.GESTURE_END,t.target,f(t,!0))):j(e.GESTURE_CHANGE,t.target,f(t))})},P=function(t){t.preventDefault(),V(t,function(t){t.targetPointerList.length<2?(document.removeEventListener(e.POINTER_MOVE,_),document.removeEventListener(e.POINTER_END,P),document.removeEventListener(e.POINTER_CANCEL,P),l=!1,j(e.GESTURE_END,t.target,f(t,!0))):j(e.GESTURE_CHANGE,t.target,f(t))})};function p(e){e.centroid={x:e.pageX,y:e.pageY},e.translation=T(e.centroid,c),e.pointerList=[new Pointer(e,PointerTypes.TOUCH,MOUSE_ID)],e.targetPointerList=e.pointerList,e.nbPointers=1}var R=function(e,t){c={x:e.pageX,y:e.pageY},p(e),t(e)},L=function(e,t){p(e),t(e)},N=function(e,t){p(e),t(e)};n.msGestures?(e.GESTURE_START="MSGestureStart",e.GESTURE_CHANGE="MSGestureChange",e.GESTURE_END="MSGestureEnd"):n.gestures?(e.GESTURE_START="gesturestart",e.GESTURE_CHANGE="gesturechange",e.GESTURE_END="gestureend"):(e.GESTURE_START="_gesture_start",e.GESTURE_CHANGE="_gesture_change",e.GESTURE_END="_gesture_end");const S=n.gestures||n.msGestures?function(t,n,r,i){var o=i.listener?i.listener.id:void 0;switch(n){case e.GESTURE_START:return i.handler=function(e){R(e,r,o)},!0;case e.GESTURE_CHANGE:return i.handler=function(e){L(e,r,o)},!0;case e.GESTURE_END:return i.handler=function(e){N(e,r,o)},!0}return!1}:function(t,n,r,i){var o=i.listener?i.listener.id:void 0;switch(n){case e.GESTURE_START:return i.gesture_handler=function(e){H(e,h,o)},t.addEventListener(e.POINTER_START,i.gesture_handler),i.handler=r,!0;case e.GESTURE_CHANGE:case e.GESTURE_END:return i.handler=r,!0}return!1};const m=n.gestures||n.msGestures?function(t,n,r){switch(n){case e.GESTURE_START:case e.GESTURE_CHANGE:case e.GESTURE_END:return!0}return!1}:function(t,n,r){var i=r.listener?r.listener.id:void 0;switch(n){case e.GESTURE_START:return t.removeEventListener(e.POINTER_START,r.gesture_handler,i),!0;case e.GESTURE_CHANGE:case e.GESTURE_END:return!0}return!1};var G=!1,O=window.navigator.pointerEnabled,A=window.navigator.msPointerEnabled;"undefined"!=typeof document&&"createTouch"in document?G=!0:O||A?G=!0:"undefined"!=typeof document&&window.navigator&&window.navigator.userAgent&&(-1===window.navigator.userAgent.indexOf("iPhone")&&-1===window.navigator.userAgent.indexOf("iPad")&&-1===window.navigator.userAgent.indexOf("Android")&&-1===window.navigator.userAgent.indexOf("BlackBerry")||(G=!0)),G?(e.POINTER_START=O?"pointerdown":A?"MSPointerDown":"touchstart",e.POINTER_MOVE=O?"pointermove":A?"MSPointerMove":"touchmove",e.POINTER_END=O?"pointerup":A?"MSPointerUp":"touchend",e.POINTER_CANCEL=O?"pointercancel":A?"MSPointerCancel":"touchcancel"):(e.POINTER_START="mousedown",e.POINTER_MOVE="mousemove",e.POINTER_END="mouseup",e.POINTER_CANCEL=null);var U=31337;class w{constructor(e,t,n,r,i,o){this.configureWithEvent(e,r,i,o),this.type=t,this.identifier=n}configureWithEvent(e,t,n,r){this.pageX=e.pageX,this.pageY=e.pageY,"undefiend"!=typeof t&&(this.clientX=t),"undefiend"!=typeof n&&(this.clientY=n),e.target?this.target=e.target:r&&(this.target=r.target),e.currentTarget?this.currentTarget=e.currentTarget:r&&(this.currentTarget=r.currentTarget)}}var C={TOUCH:2,PEN:3,MOUSE:4},I=[];function M(e,t){var n=[];e.nbPointers=e.touches.length;for(var r=0;r<e.nbPointers;r++){var i=e.touches[r],o=new w(i,C.TOUCH,i.identifier,i.clientX,i.clientY,e);n.push(o)}e.pointerList=n,n=[];for(r=0;r<e.targetTouches.length;r++){i=e.targetTouches[r];if(!t||I[i.identifier]==t){o=new w(i,C.TOUCH,i.identifier,i.clientX,i.clientY,e);n.push(o)}}e.targetPointerList=n,n=[];for(r=0;r<e.changedTouches.length;r++){i=e.changedTouches[r],o=new w(i,C.TOUCH,i.identifier,e.clientX,e.clientY,e);n.push(o)}e.changedPointerList=n}function y(e,t){var n=[];n.push(new w(e,C.MOUSE,U,e.layerX,e.layerY)),t?(e.nbPointers=0,e.pointerList=[],e.targetPointerList=[],e.changedPointerList=n):(e.nbPointers=1,e.pointerList=n,e.targetPointerList=n,e.changedPointerList=[])}var D=[],X=[];function Y(e,t,n){var r=[],i=[],o=[],s=e.pointerId,a=D[s];t?(a?(X[s]=a,D[s]=void 0):(a=X[s])||(a=new w(e,e.pointerType,s,e.layerX,e.layerY),X[s]=a),X.forEach(function(e){e&&o.push(e)}),X=[]):a?a.configureWithEvent(e):(a=new w(e,e.pointerType,s,e.layerX,e.layerY),D[s]=a),D.forEach(function(e){e&&(r.push(e),n&&I[e.identifier]!=n||i.push(e))}),e.nbPointers=r.length,e.pointerList=r,e.targetPointerList=i,e.changedPointerList=o}function b(e,t){y(e,!0),t(e)}var H,x,V,W,B=0,F=function(e){var t=e.pointerId,n=D[t];n&&(X[n.identifier]=n,D[n.identifier]=void 0),0===--B&&(document.removeEventListener(O?"pointerup":"MSPointerUp",F),document.removeEventListener(O?"pointercancel":"MSPointerCancel",F))};function k(e,t,n){if(!t||!n||!n.__event_listeners)return-1;for(var r=0;r<n.__event_listeners.length;r++){var i=n.__event_listeners[r];if(i.target===e&&i.type===t&&i.listener===n)return r}return-1}function q(t,n,r,i){var o=i.listener?i.listener.id:void 0;switch(o||(o=""+(new Date).getTime()+Math.floor(1e6*Math.random()),i.listener&&(i.listener.id=o)),n){case e.POINTER_START:return i.handler=function(e){H(e,r,o)},!0;case e.POINTER_MOVE:return i.handler=function(e){x(e,r,o)},!0;case e.POINTER_END:return i.handler=function(e){V(e,r)},!0;case e.POINTER_CANCEL:return i.handler=function(e){W(e,r)},!0}return!1}function j(e,t,n){var r=document.createEvent("Event");for(var i in r.initEvent(e,!0,!0),n)r[i]=n[i];t.dispatchEvent(r)}return G?A?(H=function(e,t,n){I[e.pointerId]=n,Y(e,!1,n),t(e),0===B&&(document.addEventListener(O?"pointerup":"MSPointerUp",F),document.addEventListener(O?"pointercancel":"MSPointerCancel",F)),B++},x=function(e,t,n){Y(e,!1,n),t(e)},V=function(e,t){Y(e,!0),t(e)},W=function(e,t){Y(e,!0),t(e)}):(H=function(e,t,n){for(var r,i=e.targetTouches.length,o=0;o<i;o++)r=e.targetTouches[o],I[r.identifier]=n;M(e),t(e)},x=function(e,t,n){M(e,n),t(e)},V=function(e,t){for(var n,r=e.changedTouches.length,i=0;i<r;i++)n=e.changedTouches[i],I[n.identifier]=void 0;M(e),t(e)},W=function(e,t){M(e),t(e,t)}):(H=function(e,t){y(e),t(e)},x=function(e,t){y(e),t(e)},V=b,W=b),e.createCustomEvent=j,e.removePointerListener=function(t,n,r,i){if(n)if(r){var o=k(t,n,r);if(-1!==o){var s=r.__event_listeners[o];r.__event_listeners.remove(o),function(t,n,r){switch(n){case e.POINTER_START:case e.POINTER_MOVE:case e.POINTER_END:case e.POINTER_CANCEL:return!0}return!1}(0,n)||m(t,n,s),t.removeEventListener(n,s.handler,i)}else console.error("removePointerListener no binding")}else console.error("removePointerListener no listener")},e.addPointerListener=function(e,n,r,i){if(n)if(r){var o=r;if(t.isFunction(r)||(o=r.handleEvent,t.isFunction(o)&&(o=o.bind(r))),-1===k(e,n,r)){r.__event_listeners||(r.__event_listeners=[]);var s={target:e,type:n,listener:r};r.__event_listeners.push(s),q(0,n,o,s)||S(e,n,o,s)||(s.handler=o),e.addEventListener(n,s.handler,i)}else console.error("addPointerListener binding already existing")}else console.error("addPointerListener no listener")},e.PointerTypes=C,e.Pointer=w,e.manageGestureListenerRemove=m,e.manageGestureListenerAdd=S,e}({},vs_utils);