(function(){function o(a,c,b,e,d){this.configureWithEvent(a,e,d);this.type=c;this.identifier=b}function D(a,c){var b=[];a.nbPointers=a.touches.length;for(var e=0;e<a.nbPointers;e++){var d=a.touches[e],d=new o(d,q.TOUCH,d.identifier,d.clientX,d.clientY);b.push(d)}a.pointerList=b;b=[];for(e=0;e<a.targetTouches.length;e++)d=a.targetTouches[e],c&&E[d.identifier]!=c||(d=new o(d,q.TOUCH,d.identifier,d.clientX,d.clientY),b.push(d));a.targetPointerList=b;b=[];for(e=0;e<a.changedTouches.length;e++)d=a.changedTouches[e],
d=new o(d,q.TOUCH,d.identifier,a.clientX,a.clientY),b.push(d);a.changedPointerList=b}function L(a,c){var b=[];b.push(new o(a,q.MOUSE,Q,a.layerX,a.layerY));c?(a.nbPointers=0,a.pointerList=[],a.targetPointerList=b,a.changedPointerList=b):(a.nbPointers=1,a.pointerList=b,a.targetPointerList=b,a.changedPointerList=[])}function F(a,c){var b=[],e=[],d=a.pointerId,f=k[d];if(c){f?(p[d]=f,delete k[d]):(f=p[d],f||(f=new o(a,a.pointerType,d,a.layerX,a.layerY),p[d]=f));for(d in p)e.push(p[d]);p={}}else f?f.configureWithEvent(a):
(f=new o(a,a.pointerType,d,a.layerX,a.layerY),k[d]=f);for(d in k)b.push(k[d]);a.nbPointers=b.length;a.pointerList=b;b=[];for(d in k)f=k[d],b.push(f);a.targetPointerList=b;a.changedPointerList=e}function X(a,c){L(a);c(a)}function Y(a,c){L(a);c(a)}function Z(a,c){L(a,!0);c(a)}function $(a,c,b){for(var e,d=a.targetTouches.length,f=0;f<d;f++)e=a.targetTouches[f],E[e.identifier]=b;D(a);c(a)}function aa(a,c,b){D(a,b);c(a)}function ba(a,c){for(var b,e=a.targetTouches.length,d=0;d<e;d++)b=a.changedTouches[d],
E[b.identifier]=void 0;D(a);c(a)}function ca(a,c){D(a);c(a,c)}function da(a,c,b){E[a.pointerId]=b;F(a,!1,b);c(a);0===G&&(document.addEventListener(l?"pointerup":"MSPointerUp",H),document.addEventListener(l?"pointercancel":"MSPointerCancel",H));G++}function ea(a,c,b){F(a,!1,b);c(a)}function fa(a,c){F(a,!0);c(a)}function ga(a,c){F(a,!0);c(a)}function R(a,c,b){if(!c||!b||!b.__event_listeners)return-1;for(var e=0;e<b.__event_listeners.length;e++){var d=b.__event_listeners[e];if(d.target===a&&d.type===
c&&d.listener===b)return e}return-1}function ha(a,c,b,e){var d=e.listener?e.listener.id:void 0;switch(c){case u:return e.handler=function(a){v(a,b,d)},!0;case w:return e.handler=function(a){x(a,b,d)},!0;case y:return e.handler=function(a){z(a,b)},!0;case A:return e.handler=function(a){I(a,b)},!0}return!1}function r(a,c,b){var e=document.createEvent("Event");e.initEvent(a,!0,!0);for(var d in b)e[d]=b[d];c.dispatchEvent(e)}function S(a,c){var b=c.pageX-a.pageX,e=c.pageY-a.pageY;return Math.sqrt(b*b+
e*e)}function T(a){var c=a.length,b=0,e=0,d=0;if(0===c)return{X:0,y:0};for(;b<c;b++)var f=a[b],e=e+f.pageX,d=d+f.pageY;return{x:e/c-M.x,y:d/c-M.y}}function N(a){a.centroid={x:a.pageX,y:a.pageY};a.translation=[a.centroid.x-s.x,a.centroid.y-s.y];a.pointerList=[new o(a,q.TOUCH,Q)];a.targetPointerList=a.pointerList;a.nbPointers=1}function ia(a,c,b,e){var d=e.listener?e.listener.id:void 0;switch(c){case m:return e.gesture_handler=function(a){v(a,ja,d)},a.addEventListener(g.POINTER_START,e.gesture_handler),
e.handler=b,!0;case i:case n:return e.handler=b,!0}return!1}function ka(a,c,b,e){switch(c){case m:return e.handler=function(a){s={x:a.pageX,y:a.pageY};N(a);b(a)},!0;case i:return e.handler=function(a){N(a);b(a)},!0;case n:return e.handler=function(a){N(a);b(a)},!0}return!1}function la(a,c,b){var e=b.listener?b.listener.id:void 0;switch(c){case m:return a.removeEventListener(g.POINTER_START,b.gesture_handler,e),!0;case i:case n:return!0}return!1}function ma(a,c){switch(c){case m:case i:case n:return!0}return!1}
var g=this.vs=this.vs||{},t=g.util=g.util||{},h=!1,l=window.navigator.pointerEnabled,j=window.navigator.msPointerEnabled;if("undefined"!=typeof document&&"createTouch"in document)h=!0;else if(l||j)h=!0;else if("undefined"!=typeof document&&window.navigator&&window.navigator.userAgent&&(-1!==window.navigator.userAgent.indexOf("Android")||-1!==window.navigator.userAgent.indexOf("BlackBerry")))h=!0;var u,w,y,A;h?(u=l?"pointerdown":j?"MSPointerDown":"touchstart",w=l?"pointermove":j?"MSPointerMove":"touchmove",
y=l?"pointerup":j?"MSPointerUp":"touchend",A=l?"pointercancel":j?"MSPointerCancel":"touchcancel"):(u="mousedown",w="mousemove",y="mouseup",A=null);var Q=31337;o.prototype.configureWithEvent=function(a,c,b){this.pageX=a.pageX;this.pageY=a.pageY;"undefiend"!==typeof c&&(this.clientX=c);"undefiend"!==typeof b&&(this.clientY=b);this.target=a.target;this.currentTarget=a.currentTarget};var q={TOUCH:2,PEN:3,MOUSE:4},E=[],k={},p={},G=0,H=function(a){if(a=k[a.pointerId])p[a.identifier]=a,delete k[a.identifier];
G--;0===G&&(document.removeEventListener(l?"pointerup":"MSPointerUp",H),document.removeEventListener(l?"pointercancel":"MSPointerCancel",H))},v,x,z,I;h?j?(v=da,x=ea,z=fa,I=ga):(v=$,x=aa,z=ba,I=ca):(v=X,x=Y,I=z=Z);g.createCustomEvent=r;g.removePointerListener=function(a,c,b,e){if(c)if(b){var d=R(a,c,b);if(-1===d)console.error("removePointerListener no binding");else{var f=b.__event_listeners[d];b.__event_listeners.remove(d);a:{switch(c){case u:case w:case y:case A:b=!0;break a}b=!1}b||na(a,c,f);a.removeEventListener(c,
f.handler,e);delete f}}else console.error("removePointerListener no listener")};g.addPointerListener=function(a,c,b,e){if(c)if(b){var d=b;t.isFunction(b)||(d=b.handleEvent,t.isFunction(d)&&(d=d.bind(b)));if(-1!==R(a,c,b))console.error("addPointerListener binding already existing");else{b.__event_listeners||(b.__event_listeners=[]);var f={target:a,type:c,listener:b};b.__event_listeners.push(f);!ha(a,c,d,f)&&!oa(a,c,d,f)&&(f.handler=d);a.addEventListener(c,f.handler,e)}}else console.error("addPointerListener no listener")};
g.PointerTypes=q;g.POINTER_START=u;g.POINTER_MOVE=w;g.POINTER_END=y;g.POINTER_CANCEL=A;var m,i,n,h={},j=["gesturestart","gesturechange","gestureend"];document.createElement("div");for(var J=0;J<j.length;J++){var B=j[J],B="on"+B,O=B in t.vsTestElem;O||(t.vsTestElem.setAttribute(B,"return;"),O="function"==typeof t.vsTestElem[B]);h[j[J]]=O}h.gestures=h.gesturestart&&h.gesturechange&&h.gestureend;"MSGestureEvent"in window&&(h.msGestures=!0);h.gestures=!1;h.msGestures=!1;var U=0,V=0,s,M,C=function(a,c){var b=
c?void 0:T(a.targetPointerList);return{scale:c?void 0:S(a.targetPointerList[0],a.targetPointerList[1])/U,rotation:c?void 0:180*Math.atan2(a.targetPointerList[1].pageY-a.targetPointerList[0].pageY,a.targetPointerList[1].pageX-a.targetPointerList[0].pageX)/Math.PI-V,translation:c?void 0:[b.x-s.x,b.y-s.y],nbPointers:a.nbPointers,pointerList:a.pointerList,targetPointerList:a.targetPointerList,centroid:b,changedPointerList:a.changedPointerList}},P=!1,ja=function(a){2>a.targetPointerList.length||(P?r(i,
a.target,C(a)):(U=S(a.targetPointerList[0],a.targetPointerList[1]),V=180*Math.atan2(a.targetPointerList[1].pageY-a.targetPointerList[0].pageY,a.targetPointerList[1].pageX-a.targetPointerList[0].pageX)/Math.PI,M=t.getElementAbsolutePosition(a.targetPointerList[0].target,!0),s=T(a.targetPointerList),document.addEventListener(g.POINTER_MOVE,W),document.addEventListener(g.POINTER_END,K),document.addEventListener(g.POINTER_CANCEL,K),r(m,a.target,C(a)),P=!0))},W=function(a){x(a,function(a){r(i,a.target,
C(a))})},K=function(a){z(a,function(a){2>a.targetPointerList.length?(document.removeEventListener(g.POINTER_MOVE,W),document.removeEventListener(g.POINTER_END,K),document.removeEventListener(g.POINTER_CANCEL,K),P=!1,r(n,a.target,C(a,!0))):r(i,a.target,C(a))})};h.msGestures?(m="MSGestureStart",i="MSGestureChange",n="MSGestureEnd"):h.gestures?(m="gesturestart",i="gesturechange",n="gestureend"):(m="_gesture_start",i="_gesture_change",n="_gesture_end");var oa=h.gestures||h.msGestures?ka:ia,na=h.gestures||
h.msGestures?ma:la;g.GESTURE_START=m;g.GESTURE_CHANGE=i;g.GESTURE_END=n}).call(this);
