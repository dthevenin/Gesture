(function(){function n(a,c,b){this.configureWithEvent(a);this.type=c;this.identifier=b}function B(a,c){var b=[];a.nbPointers=a.touches.length;for(var e=0;e<a.nbPointers;e++){var d=a.touches[e],d=new n(d,p.TOUCH,d.identifier);b.push(d)}a.pointerList=b;b=[];for(e=0;e<a.targetTouches.length;e++)d=a.targetTouches[e],c&&C[d.identifier]!=c||(d=new n(d,p.TOUCH,d.identifier),b.push(d));a.targetPointerList=b;b=[];for(e=0;e<a.changedTouches.length;e++)d=a.changedTouches[e],d=new n(d,p.TOUCH,d.identifier),b.push(d);
a.changedPointerList=b}function J(a,c){var b=[];b.push(new n(a,p.MOUSE,O));c?(a.nbPointers=0,a.pointerList=[],a.targetPointerList=b,a.changedPointerList=b):(a.nbPointers=1,a.pointerList=b,a.targetPointerList=b,a.changedPointerList=[])}function D(a,c){var b=[],e=[],d=a.pointerId,f=k[d];if(c){f?(o[d]=f,delete k[d]):(f=o[d],f||(f=new n(a,a.pointerType,d),o[d]=f));for(d in o)e.push(o[d]);o={}}else f?f.configureWithEvent(a):(f=new n(a,a.pointerType,d),k[d]=f);for(d in k)b.push(k[d]);a.nbPointers=b.length;
a.pointerList=b;b=[];for(d in k)f=k[d],b.push(f);a.targetPointerList=b;a.changedPointerList=e}function V(a,c){J(a);c(a)}function W(a,c){J(a);c(a)}function X(a,c){J(a,!0);c(a)}function Y(a,c,b){for(var e,d=a.targetTouches.length,f=0;f<d;f++)e=a.targetTouches[f],C[e.identifier]=b;B(a);c(a)}function Z(a,c,b){B(a,b);c(a)}function $(a,c){for(var b,e=a.targetTouches.length,d=0;d<e;d++)b=a.changedTouches[d],C[b.identifier]=void 0;B(a);c(a)}function aa(a,c){B(a);c(a,c)}function ba(a,c,b){C[a.pointerId]=b;
D(a,!1,b);c(a);0===E&&(document.addEventListener("MSPointerUp",F),document.addEventListener("MSPointerCancel",F));E++}function ca(a,c,b){D(a,!1,b);c(a)}function da(a,c){D(a,!0);c(a)}function ea(a,c){D(a,!0);c(a)}function P(a,c,b){if(!c||!b||!b.__event_listeners)return-1;for(var e=0;e<b.__event_listeners.length;e++){var d=b.__event_listeners[e];if(d.target===a&&d.type===c&&d.listener===b)return e}return-1}function fa(a,c,b,e){var d=e.listener?e.listener.id:void 0;switch(c){case t:return e.handler=
function(a){u(a,b,d)},!0;case v:return e.handler=function(a){w(a,b,d)},!0;case x:return e.handler=function(a){pointerEndHandler(a,b)},!0;case y:return e.handler=function(a){G(a,b)},!0}return!1}function q(a,c,b){var e=document.createEvent("Event");e.initEvent(a,!0,!0);for(var d in b)e[d]=b[d];c.dispatchEvent(e)}function Q(a,c){var b=c.pageX-a.pageX,e=c.pageY-a.pageY;return Math.sqrt(b*b+e*e)}function R(a){var c=a.length,b=0,e=0,d=0;if(0===c)return{X:0,y:0};for(;b<c;b++)var f=a[b],e=e+f.pageX,d=d+f.pageY;
return{x:e/c-K.x,y:d/c-K.y}}function L(a){a.barycentre={x:a.pageX,y:a.pageY};a.translation=[a.barycentre.x-r.x,a.barycentre.y-r.y];a.pointerList=[new n(a,p.TOUCH,O)];a.targetPointerList=a.pointerList;a.nbPointers=1}function ga(a,c,b,e){var d=e.listener?e.listener.id:void 0;switch(c){case l:return e.gesture_handler=function(a){u(a,ha,d)},a.addEventListener(g.POINTER_START,e.gesture_handler),e.handler=b,!0;case i:case m:return e.handler=b,!0}return!1}function ia(a,c,b,e){switch(c){case l:return e.handler=
function(a){r={x:a.pageX,y:a.pageY};L(a);b(a)},!0;case i:return e.handler=function(a){L(a);b(a)},!0;case m:return e.handler=function(a){L(a);b(a)},!0}return!1}function ja(a,c,b){var e=b.listener?b.listener.id:void 0;switch(c){case l:return a.removeEventListener(g.POINTER_START,b.gesture_handler,e),!0;case i:case m:return!0}return!1}function ka(a,c){switch(c){case l:case i:case m:return!0}return!1}"undefined"===typeof exports&&(exports=this);var g=exports.vs,s=g.util,h=!1,j=window.navigator.msPointerEnabled;
if("undefined"!=typeof document&&"createTouch"in document)h=!0;else if(j)h=!0;else if("undefined"!=typeof document&&window.navigator&&window.navigator.userAgent&&(-1!==window.navigator.userAgent.indexOf("Android")||-1!==window.navigator.userAgent.indexOf("BlackBerry")))h=!0;var t,v,x,y;h?(t=j?"MSPointerDown":"touchstart",v=j?"MSPointerMove":"touchmove",x=j?"MSPointerUp":"touchend",y=j?"MSPointerCancel":"touchcancel"):(t="mousedown",v="mousemove",y=x="mouseup");var O=31337;n.prototype.configureWithEvent=
function(a){this.pageX=a.pageX;this.pageY=a.pageY;this.clientX=a.clientX;this.clientY=a.clientY;this.target=a.target;this.currentTarget=a.currentTarget};var p={TOUCH:2,PEN:3,MOUSE:4},C=[],k={},o={},E=0,F=function(a){if(a=k[a.pointerId])o[a.identifier]=a,delete k[a.identifier];E--;0===E&&(document.removeEventListener("MSPointerUp",F),document.removeEventListener("MSPointerCancel",F))},u,w,G;h?j?(u=ba,w=ca,pointerEndHandler=da,G=ea):(u=Y,w=Z,pointerEndHandler=$,G=aa):(u=V,w=W,G=pointerEndHandler=X);
g.createCustomEvent=q;g.removePointerListener=function(a,c,b,e){if(b){var d=P(a,c,b);if(-1===d)console.error("removePointerListener no binding");else{var f=b.__event_listeners[d];b.__event_listeners.remove(d);a:{switch(c){case t:case v:case x:case y:b=!0;break a}b=!1}b||la(a,c,f);a.removeEventListener(c,f.handler,e);delete f}}else console.error("removePointerListener no listener")};g.addPointerListener=function(a,c,b,e){if(b){var d=b;s.isFunction(b)||(d=b.handleEvent,s.isFunction(d)&&(d=d.bind(b)));
if(-1!==P(a,c,b))console.error("addPointerListener binding already existing");else{b.__event_listeners||(b.__event_listeners=[]);var f={target:a,type:c,listener:b};b.__event_listeners.push(f);!fa(a,c,d,f)&&!ma(a,c,d,f)&&(f.handler=d);a.addEventListener(c,f.handler,e)}}else console.error("addPointerListener no listener")};g.PointerTypes=p;g.POINTER_START=t;g.POINTER_MOVE=v;g.POINTER_END=x;g.POINTER_CANCEL=y;var l,i,m,h={},j=["gesturestart","gesturechange","gestureend"];document.createElement("div");
for(var H=0;H<j.length;H++){var z=j[H],z="on"+z,M=z in s.vsTestElem;M||(s.vsTestElem.setAttribute(z,"return;"),M="function"==typeof s.vsTestElem[z]);h[j[H]]=M}h.gestures=h.gesturestart&&h.gesturechange&&h.gestureend;"MSGestureEvent"in window&&(h.msGestures=!0);h.gestures=!1;h.msGestures=!1;var S=0,T=0,r,K,A=function(a,c){var b=c?void 0:R(a.targetPointerList);return{scale:c?void 0:Q(a.targetPointerList[0],a.targetPointerList[1])/S,rotation:c?void 0:180*Math.atan2(a.targetPointerList[1].pageY-a.targetPointerList[0].pageY,
a.targetPointerList[1].pageX-a.targetPointerList[0].pageX)/Math.PI-T,translation:c?void 0:[b.x-r.x,b.y-r.y],nbPointers:a.nbPointers,pointerList:a.pointerList,targetPointerList:a.targetPointerList,barycentre:b,changedPointerList:a.changedPointerList}},N=!1,ha=function(a){2>a.targetPointerList.length||(N?q(i,a.target,A(a)):(S=Q(a.targetPointerList[0],a.targetPointerList[1]),T=180*Math.atan2(a.targetPointerList[1].pageY-a.targetPointerList[0].pageY,a.targetPointerList[1].pageX-a.targetPointerList[0].pageX)/
Math.PI,K=s.getElementAbsolutePosition(a.targetPointerList[0].target,!0),r=R(a.targetPointerList),document.addEventListener(g.POINTER_MOVE,U),document.addEventListener(g.POINTER_END,I),document.addEventListener(g.POINTER_CANCEL,I),q(l,a.target,A(a)),N=!0))},U=function(a){w(a,function(a){q(i,a.target,A(a))})},I=function(a){pointerEndHandler(a,function(a){2>a.targetPointerList.length?(document.removeEventListener(g.POINTER_MOVE,U),document.removeEventListener(g.POINTER_END,I),document.removeEventListener(g.POINTER_CANCEL,
I),N=!1,q(m,a.target,A(a,!0))):q(i,a.target,A(a))})};h.msGestures?(l="MSGestureStart",i="MSGestureChange",m="MSGestureEnd"):h.gestures?(l="gesturestart",i="gesturechange",m="gestureend"):(l="_gesture_start",i="_gesture_change",m="_gesture_end");var ma=h.gestures||h.msGestures?ia:ga,la=h.gestures||h.msGestures?ka:ja;g.GESTURE_START=l;g.GESTURE_CHANGE=i;g.GESTURE_END=m}).call(this);
