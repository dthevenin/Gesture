(function(){function n(a,c,b){this.configureWithEvent(a);this.type=c;this.identifier=b}function C(a,c){var b=[];a.nbPointers=a.touches.length;for(var e=0;e<a.nbPointers;e++){var d=a.touches[e],d=new n(d,p.TOUCH,d.identifier);b.push(d)}a.pointerList=b;b=[];for(e=0;e<a.targetTouches.length;e++)d=a.targetTouches[e],c&&D[d.identifier]!=c||(d=new n(d,p.TOUCH,d.identifier),b.push(d));a.targetPointerList=b;b=[];for(e=0;e<a.changedTouches.length;e++)d=a.changedTouches[e],d=new n(d,p.TOUCH,d.identifier),b.push(d);
a.changedPointerList=b}function K(a,c){var b=[];b.push(new n(a,p.MOUSE,P));c?(a.nbPointers=0,a.pointerList=[],a.targetPointerList=b,a.changedPointerList=b):(a.nbPointers=1,a.pointerList=b,a.targetPointerList=b,a.changedPointerList=[])}function E(a,c){var b=[],e=[],d=a.pointerId,f=k[d];if(c){f?(o[d]=f,delete k[d]):(f=o[d],f||(f=new n(a,a.pointerType,d),o[d]=f));for(d in o)e.push(o[d]);o={}}else f?f.configureWithEvent(a):(f=new n(a,a.pointerType,d),k[d]=f);for(d in k)b.push(k[d]);a.nbPointers=b.length;
a.pointerList=b;b=[];for(d in k)f=k[d],b.push(f);a.targetPointerList=b;a.changedPointerList=e}function W(a,c){K(a);c(a)}function X(a,c){K(a);c(a)}function Y(a,c){K(a,!0);c(a)}function Z(a,c,b){for(var e,d=a.targetTouches.length,f=0;f<d;f++)e=a.targetTouches[f],D[e.identifier]=b;C(a);c(a)}function $(a,c,b){C(a,b);c(a)}function aa(a,c){for(var b,e=a.targetTouches.length,d=0;d<e;d++)b=a.changedTouches[d],D[b.identifier]=void 0;C(a);c(a)}function ba(a,c){C(a);c(a,c)}function ca(a,c,b){D[a.pointerId]=
b;E(a,!1,b);c(a);0===F&&(document.addEventListener("MSPointerUp",G),document.addEventListener("MSPointerCancel",G));F++}function da(a,c,b){E(a,!1,b);c(a)}function ea(a,c){E(a,!0);c(a)}function fa(a,c){E(a,!0);c(a)}function Q(a,c,b){if(!c||!b||!b.__event_listeners)return-1;for(var e=0;e<b.__event_listeners.length;e++){var d=b.__event_listeners[e];if(d.target===a&&d.type===c&&d.listener===b)return e}return-1}function ga(a,c,b,e){var d=e.listener?e.listener.id:void 0;switch(c){case t:return e.handler=
function(a){u(a,b,d)},!0;case v:return e.handler=function(a){w(a,b,d)},!0;case x:return e.handler=function(a){y(a,b)},!0;case z:return e.handler=function(a){H(a,b)},!0}return!1}function q(a,c,b){var e=document.createEvent("Event");e.initEvent(a,!0,!0);for(var d in b)e[d]=b[d];c.dispatchEvent(e)}function R(a,c){var b=c.pageX-a.pageX,e=c.pageY-a.pageY;return Math.sqrt(b*b+e*e)}function S(a){var c=a.length,b=0,e=0,d=0;if(0===c)return{X:0,y:0};for(;b<c;b++)var f=a[b],e=e+f.pageX,d=d+f.pageY;return{x:e/
c-L.x,y:d/c-L.y}}function M(a){a.centroid={x:a.pageX,y:a.pageY};a.translation=[a.centroid.x-r.x,a.centroid.y-r.y];a.pointerList=[new n(a,p.TOUCH,P)];a.targetPointerList=a.pointerList;a.nbPointers=1}function ha(a,c,b,e){var d=e.listener?e.listener.id:void 0;switch(c){case l:return e.gesture_handler=function(a){u(a,ia,d)},a.addEventListener(g.POINTER_START,e.gesture_handler),e.handler=b,!0;case i:case m:return e.handler=b,!0}return!1}function ja(a,c,b,e){switch(c){case l:return e.handler=function(a){r=
{x:a.pageX,y:a.pageY};M(a);b(a)},!0;case i:return e.handler=function(a){M(a);b(a)},!0;case m:return e.handler=function(a){M(a);b(a)},!0}return!1}function ka(a,c,b){var e=b.listener?b.listener.id:void 0;switch(c){case l:return a.removeEventListener(g.POINTER_START,b.gesture_handler,e),!0;case i:case m:return!0}return!1}function la(a,c){switch(c){case l:case i:case m:return!0}return!1}var g=this.vs=this.vs||{},s=g.util=g.util||{},h=!1,j=window.navigator.msPointerEnabled;if("undefined"!=typeof document&&
"createTouch"in document)h=!0;else if(j)h=!0;else if("undefined"!=typeof document&&window.navigator&&window.navigator.userAgent&&(-1!==window.navigator.userAgent.indexOf("Android")||-1!==window.navigator.userAgent.indexOf("BlackBerry")))h=!0;var t,v,x,z;h?(t=j?"MSPointerDown":"touchstart",v=j?"MSPointerMove":"touchmove",x=j?"MSPointerUp":"touchend",z=j?"MSPointerCancel":"touchcancel"):(t="mousedown",v="mousemove",x="mouseup",z=null);var P=31337;n.prototype.configureWithEvent=function(a){this.pageX=
a.pageX;this.pageY=a.pageY;this.clientX=a.layerX;this.clientY=a.layerY;this.target=a.target;this.currentTarget=a.currentTarget};var p={TOUCH:2,PEN:3,MOUSE:4},D=[],k={},o={},F=0,G=function(a){if(a=k[a.pointerId])o[a.identifier]=a,delete k[a.identifier];F--;0===F&&(document.removeEventListener("MSPointerUp",G),document.removeEventListener("MSPointerCancel",G))},u,w,y,H;h?j?(u=ca,w=da,y=ea,H=fa):(u=Z,w=$,y=aa,H=ba):(u=W,w=X,H=y=Y);g.createCustomEvent=q;g.removePointerListener=function(a,c,b,e){if(c)if(b){var d=
Q(a,c,b);if(-1===d)console.error("removePointerListener no binding");else{var f=b.__event_listeners[d];b.__event_listeners.remove(d);a:{switch(c){case t:case v:case x:case z:b=!0;break a}b=!1}b||ma(a,c,f);a.removeEventListener(c,f.handler,e);delete f}}else console.error("removePointerListener no listener")};g.addPointerListener=function(a,c,b,e){if(c)if(b){var d=b;s.isFunction(b)||(d=b.handleEvent,s.isFunction(d)&&(d=d.bind(b)));if(-1!==Q(a,c,b))console.error("addPointerListener binding already existing");
else{b.__event_listeners||(b.__event_listeners=[]);var f={target:a,type:c,listener:b};b.__event_listeners.push(f);!ga(a,c,d,f)&&!na(a,c,d,f)&&(f.handler=d);a.addEventListener(c,f.handler,e)}}else console.error("addPointerListener no listener")};g.PointerTypes=p;g.POINTER_START=t;g.POINTER_MOVE=v;g.POINTER_END=x;g.POINTER_CANCEL=z;var l,i,m,h={},j=["gesturestart","gesturechange","gestureend"];document.createElement("div");for(var I=0;I<j.length;I++){var A=j[I],A="on"+A,N=A in s.vsTestElem;N||(s.vsTestElem.setAttribute(A,
"return;"),N="function"==typeof s.vsTestElem[A]);h[j[I]]=N}h.gestures=h.gesturestart&&h.gesturechange&&h.gestureend;"MSGestureEvent"in window&&(h.msGestures=!0);h.gestures=!1;h.msGestures=!1;var T=0,U=0,r,L,B=function(a,c){var b=c?void 0:S(a.targetPointerList);return{scale:c?void 0:R(a.targetPointerList[0],a.targetPointerList[1])/T,rotation:c?void 0:180*Math.atan2(a.targetPointerList[1].pageY-a.targetPointerList[0].pageY,a.targetPointerList[1].pageX-a.targetPointerList[0].pageX)/Math.PI-U,translation:c?
void 0:[b.x-r.x,b.y-r.y],nbPointers:a.nbPointers,pointerList:a.pointerList,targetPointerList:a.targetPointerList,centroid:b,changedPointerList:a.changedPointerList}},O=!1,ia=function(a){2>a.targetPointerList.length||(O?q(i,a.target,B(a)):(T=R(a.targetPointerList[0],a.targetPointerList[1]),U=180*Math.atan2(a.targetPointerList[1].pageY-a.targetPointerList[0].pageY,a.targetPointerList[1].pageX-a.targetPointerList[0].pageX)/Math.PI,L=s.getElementAbsolutePosition(a.targetPointerList[0].target,!0),r=S(a.targetPointerList),
document.addEventListener(g.POINTER_MOVE,V),document.addEventListener(g.POINTER_END,J),document.addEventListener(g.POINTER_CANCEL,J),q(l,a.target,B(a)),O=!0))},V=function(a){w(a,function(a){q(i,a.target,B(a))})},J=function(a){y(a,function(a){2>a.targetPointerList.length?(document.removeEventListener(g.POINTER_MOVE,V),document.removeEventListener(g.POINTER_END,J),document.removeEventListener(g.POINTER_CANCEL,J),O=!1,q(m,a.target,B(a,!0))):q(i,a.target,B(a))})};h.msGestures?(l="MSGestureStart",i="MSGestureChange",
m="MSGestureEnd"):h.gestures?(l="gesturestart",i="gesturechange",m="gestureend"):(l="_gesture_start",i="_gesture_change",m="_gesture_end");var na=h.gestures||h.msGestures?ja:ha,ma=h.gestures||h.msGestures?la:ka;g.GESTURE_START=l;g.GESTURE_CHANGE=i;g.GESTURE_END=m}).call(this);
