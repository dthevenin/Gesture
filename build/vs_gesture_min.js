(function(){function n(a,c,b){this.configureWithEvent(a);this.type=c;this.identifier=b}function A(a,c){var b=[];a.nbPointers=a.touches.length;for(var e=0;e<a.nbPointers;e++){var d=a.touches[e],d=new n(d,p.TOUCH,d.identifier);b.push(d)}a.pointerList=b;b=[];for(e=0;e<a.targetTouches.length;e++)d=a.targetTouches[e],c&&B[d.identifier]!=c||(d=new n(d,p.TOUCH,d.identifier),b.push(d));a.targetPointerList=b;b=[];for(e=0;e<a.changedTouches.length;e++)d=a.changedTouches[e],d=new n(d,p.TOUCH,d.identifier),b.push(d);
a.changedPointerList=b}function I(a,c){var b=[];b.push(new n(a,p.MOUSE,M));c?(a.nbPointers=0,a.pointerList=[],a.targetPointerList=b,a.changedPointerList=b):(a.nbPointers=1,a.pointerList=b,a.targetPointerList=b,a.changedPointerList=[])}function C(a,c){var b=[],e=[],d=a.pointerId,f=k[d];if(c){f?(o[d]=f,delete k[d]):(f=o[d],f||(f=new n(a,a.pointerType,d),o[d]=f));for(d in o)e.push(o[d]);o={}}else f?f.configureWithEvent(a):(f=new n(a,a.pointerType,d),k[d]=f);for(d in k)b.push(k[d]);a.nbPointers=b.length;
a.pointerList=b;b=[];for(d in k)f=k[d],b.push(f);a.targetPointerList=b;a.changedPointerList=e}function R(a,c){I(a);c(a)}function S(a,c){I(a);c(a)}function T(a,c){I(a,!0);c(a)}function U(a,c,b){for(var e,d=a.targetTouches.length,f=0;f<d;f++)e=a.targetTouches[f],B[e.identifier]=b;A(a);c(a)}function V(a,c,b){A(a,b);c(a)}function W(a,c){for(var b,e=a.targetTouches.length,d=0;d<e;d++)b=a.changedTouches[d],B[b.identifier]=void 0;A(a);c(a)}function X(a,c){A(a);c(a,c)}function Y(a,c,b){B[a.pointerId]=b;C(a,
!1,b);c(a);0===D&&(document.addEventListener("MSPointerUp",E),document.addEventListener("MSPointerCancel",E));D++}function Z(a,c,b){C(a,!1,b);c(a)}function $(a,c){C(a,!0);c(a)}function aa(a,c){C(a,!0);c(a)}function N(a,c,b){if(!c||!b||!b.__event_listeners)return-1;for(var e=0;e<b.__event_listeners.length;e++){var d=b.__event_listeners[e];if(d.target===a&&d.type===c&&d.listener===b)return e}return-1}function ba(a,c,b,e){var d=e.listener?e.listener.id:void 0;switch(c){case s:return e.handler=function(a){t(a,
b,d)},!0;case u:return e.handler=function(a){v(a,b,d)},!0;case w:return e.handler=function(a){pointerEndHandler(a,b)},!0;case x:return e.handler=function(a){F(a,b)},!0}return!1}function q(a,c,b){var e=document.createEvent("Event");e.initEvent(a,!0,!0);for(var d in b)e[d]=b[d];c.dispatchEvent(e)}function O(a,c){var b=c.pageX-a.pageX,e=c.pageY-a.pageY;return Math.sqrt(b*b+e*e)}function P(a){var c=a.length,b=0,e=0,d=0;if(0===c)return{X:0,y:0};for(var f=a[0].target.__init_pos;b<c;b++)var g=a[b],e=e+g.pageX,
d=d+g.pageY;return{x:e/c-f.x,y:d/c-f.y}}function J(a){a.barycentre={x:a.pageX,y:a.pageY};a.translation=[a.barycentre.x-event.target.__init_barycentre.x,a.barycentre.y-event.target.__init_barycentre.y];a.pointerList=[new n(a,p.TOUCH,M)];a.targetPointerList=a.pointerList;a.nbPointers=1}function ca(a,c,b,e){var d=e.listener?e.listener.id:void 0;switch(c){case l:return e.gesture_handler=function(a){t(a,da,d)},a.addEventListener(g.POINTER_START,e.gesture_handler),e.handler=b,!0;case i:case m:return e.handler=
b,!0}return!1}function ea(a,c,b,e){switch(c){case l:return e.handler=function(a){a.target.__init_barycentre={x:a.pageX,y:a.pageY};J(a);b(a)},!0;case i:return e.handler=function(a){J(a);b(a)},!0;case m:return e.handler=function(a){J(a);b(a)},!0}return!1}function fa(a,c,b){var e=b.listener?b.listener.id:void 0;switch(c){case l:return a.removeEventListener(g.POINTER_START,b.gesture_handler,e),!0;case i:case m:return!0}return!1}function ga(a,c){switch(c){case l:case i:case m:return!0}return!1}"undefined"===
typeof exports&&(exports=this);var g=exports.vs,r=g.util,h=!1,j=window.navigator.msPointerEnabled;if("undefined"!=typeof document&&"createTouch"in document)h=!0;else if(j)h=!0;else if("undefined"!=typeof document&&window.navigator&&window.navigator.userAgent&&(-1!==window.navigator.userAgent.indexOf("Android")||-1!==window.navigator.userAgent.indexOf("BlackBerry")))h=!0;var s,u,w,x;h?(s=j?"MSPointerDown":"touchstart",u=j?"MSPointerMove":"touchmove",w=j?"MSPointerUp":"touchend",x=j?"MSPointerCancel":
"touchcancel"):(s="mousedown",u="mousemove",x=w="mouseup");var M=31337;n.prototype.configureWithEvent=function(a){this.pageX=a.pageX;this.pageY=a.pageY;this.clientX=a.clientX;this.clientY=a.clientY;this.target=a.target;this.currentTarget=a.currentTarget};var p={TOUCH:2,PEN:3,MOUSE:4},B=[],k={},o={},D=0,E=function(a){if(a=k[a.pointerId])o[a.identifier]=a,delete k[a.identifier];D--;0===D&&(document.removeEventListener("MSPointerUp",E),document.removeEventListener("MSPointerCancel",E))},t,v,F;h?j?(t=
Y,v=Z,pointerEndHandler=$,F=aa):(t=U,v=V,pointerEndHandler=W,F=X):(t=R,v=S,F=pointerEndHandler=T);g.createCustomEvent=q;g.removePointerListener=function(a,c,b,e){if(b){var d=N(a,c,b);if(-1===d)console.error("removePointerListener no binding");else{var f=b.__event_listeners[d];b.__event_listeners.remove(d);a:{switch(c){case s:case u:case w:case x:b=!0;break a}b=!1}b||ha(a,c,f);a.removeEventListener(c,f.handler,e);delete f}}else console.error("removePointerListener no listener")};g.addPointerListener=
function(a,c,b,e){if(b){var d=b;r.isFunction(b)||(d=b.handleEvent,r.isFunction(d)&&(d=d.bind(b)));if(-1!==N(a,c,b))console.error("addPointerListener binding already existing");else{b.__event_listeners||(b.__event_listeners=[]);var f={target:a,type:c,listener:b};b.__event_listeners.push(f);!ba(a,c,d,f)&&!ia(a,c,d,f)&&(f.handler=d);a.addEventListener(c,f.handler,e)}}else console.error("addPointerListener no listener")};g.PointerTypes=p;g.POINTER_START=s;g.POINTER_MOVE=u;g.POINTER_END=w;g.POINTER_CANCEL=
x;var l,i,m,h={},j=["gesturestart","gesturechange","gestureend"];document.createElement("div");for(var G=0;G<j.length;G++){var y=j[G],y="on"+y,K=y in r.vsTestElem;K||(r.vsTestElem.setAttribute(y,"return;"),K="function"==typeof r.vsTestElem[y]);h[j[G]]=K}h.gestures=h.gesturestart&&h.gesturechange&&h.gestureend;"MSGestureEvent"in window&&(h.msGestures=!0);h.gestures=!1;h.msGestures=!1;var z=function(a,c){var b=c?void 0:P(a.targetPointerList);return{scale:c?void 0:O(a.targetPointerList[0],a.targetPointerList[1])/
a.target.__init_distance,rotation:c?void 0:180*Math.atan2(a.targetPointerList[1].pageY-a.targetPointerList[0].pageY,a.targetPointerList[1].pageX-a.targetPointerList[0].pageX)/Math.PI-a.target.__init_angle,translation:c?void 0:[b.x-a.target.__init_barycentre.x,b.y-a.target.__init_barycentre.y],nbPointers:a.nbPointers,pointerList:a.pointerList,targetPointerList:a.targetPointerList,barycentre:b,changedPointerList:a.changedPointerList}},L=!1,da=function(a){if(!(2>a.targetPointerList.length))if(L)q(i,
a.target,z(a));else{a.target.__init_distance=O(a.targetPointerList[0],a.targetPointerList[1]);a.target.__init_angle=180*Math.atan2(a.targetPointerList[1].pageY-a.targetPointerList[0].pageY,a.targetPointerList[1].pageX-a.targetPointerList[0].pageX)/Math.PI;var c=r.getElementAbsolutePosition(a.targetPointerList[0].target,!0);a.target.__init_pos=c;c=P(a.targetPointerList);a.target.__init_barycentre=c;document.addEventListener(g.POINTER_MOVE,Q);document.addEventListener(g.POINTER_END,H);document.addEventListener(g.POINTER_CANCEL,
H);q(l,a.target,z(a));L=!0}},Q=function(a){v(a,function(a){q(i,a.target,z(a))})},H=function(a){pointerEndHandler(a,function(a){2>a.targetPointerList.length?(document.removeEventListener(g.POINTER_MOVE,Q),document.removeEventListener(g.POINTER_END,H),document.removeEventListener(g.POINTER_CANCEL,H),L=!1,q(m,a.target,z(a,!0))):q(i,a.target,z(a))})};h.msGestures?(l="MSGestureStart",i="MSGestureChange",m="MSGestureEnd"):h.gestures?(l="gesturestart",i="gesturechange",m="gestureend"):(l="_gesture_start",
i="_gesture_change",m="_gesture_end");var ia=h.gestures||h.msGestures?ea:ca,ha=h.gestures||h.msGestures?ga:fa;g.GESTURE_START=l;g.GESTURE_CHANGE=i;g.GESTURE_END=m}).call(this);
