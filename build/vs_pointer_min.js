(function(){function j(a,d,b,e,c,i){this.configureWithEvent(a,e,c,i);this.type=d;this.identifier=b}function u(a,d){var b=[];a.nbPointers=a.touches.length;for(var e=0;e<a.nbPointers;e++){var c=a.touches[e],c=new j(c,n.TOUCH,c.identifier,c.clientX,c.clientY,a);b.push(c)}a.pointerList=b;b=[];for(e=0;e<a.targetTouches.length;e++)c=a.targetTouches[e],d&&o[c.identifier]!=d||(c=new j(c,n.TOUCH,c.identifier,c.clientX,c.clientY,a),b.push(c));a.targetPointerList=b;b=[];for(e=0;e<a.changedTouches.length;e++)c=
a.changedTouches[e],c=new j(c,n.TOUCH,c.identifier,a.clientX,a.clientY,a),b.push(c);a.changedPointerList=b}function C(a,d){var b=[];b.push(new j(a,n.MOUSE,F,a.layerX,a.layerY));d?(a.nbPointers=0,a.pointerList=[],a.targetPointerList=b,a.changedPointerList=b):(a.nbPointers=1,a.pointerList=b,a.targetPointerList=b,a.changedPointerList=[])}function v(a,d,b){var e=[],c=[],i=[],f=a.pointerId,g=k[f];d?(g?(l[f]=g,k[f]=void 0):(g=l[f],g||(g=new j(a,a.pointerType,f,a.layerX,a.layerY),l[f]=g)),l.forEach(function(a){a&&
i.push(a)}),l=[]):g?g.configureWithEvent(a):(g=new j(a,a.pointerType,f,a.layerX,a.layerY),k[f]=g);k.forEach(function(a){a&&(e.push(a),b&&o[a.identifier]!=b||c.push(a))});a.nbPointers=e.length;a.pointerList=e;a.targetPointerList=c;a.changedPointerList=i}function G(a,d){C(a);d(a)}function H(a,d){C(a);d(a)}function I(a,d){C(a,!0);d(a)}function J(a,d,b){for(var e,c=a.targetTouches.length,i=0;i<c;i++)e=a.targetTouches[i],o[e.identifier]=b;u(a);d(a)}function K(a,d,b){u(a,b);d(a)}function L(a,d){for(var b,
e=a.changedTouches.length,c=0;c<e;c++)b=a.changedTouches[c],o[b.identifier]=void 0;u(a);d(a)}function M(a,d){u(a);d(a,d)}function N(a,d,b){o[a.pointerId]=b;v(a,!1,b);d(a);0===w&&(document.addEventListener(h?"pointerup":"MSPointerUp",x),document.addEventListener(h?"pointercancel":"MSPointerCancel",x));w++}function O(a,d,b){v(a,!1,b);d(a)}function P(a,d){v(a,!0);d(a)}function Q(a,d){v(a,!0);d(a)}function D(a,d,b){if(!d||!b||!b.__event_listeners)return-1;for(var e=0;e<b.__event_listeners.length;e++){var c=
b.__event_listeners[e];if(c.target===a&&c.type===d&&c.listener===b)return e}return-1}function R(a,d,b,e){var c=e.listener?e.listener.id:void 0;c||(c=""+(new Date).getTime()+""+Math.floor(1E6*Math.random()),e.listener&&(e.listener.id=c));switch(d){case p:return e.handler=function(a){y(a,b,c)},!0;case q:return e.handler=function(a){z(a,b,c)},!0;case r:return e.handler=function(a){A(a,b)},!0;case s:return e.handler=function(a){B(a,b)},!0}return!1}var f=this.vs=this.vs||{},E=f.util=f.util||{},t=!1,h=
window.navigator.pointerEnabled,m=window.navigator.msPointerEnabled;if("undefined"!=typeof document&&"createTouch"in document)t=!0;else if(h||m)t=!0;else if("undefined"!=typeof document&&window.navigator&&window.navigator.userAgent&&(-1!==window.navigator.userAgent.indexOf("Android")||-1!==window.navigator.userAgent.indexOf("BlackBerry")))t=!0;var p,q,r,s;t?(p=h?"pointerdown":m?"MSPointerDown":"touchstart",q=h?"pointermove":m?"MSPointerMove":"touchmove",r=h?"pointerup":m?"MSPointerUp":"touchend",
s=h?"pointercancel":m?"MSPointerCancel":"touchcancel"):(p="mousedown",q="mousemove",r="mouseup",s=null);var F=31337;j.prototype.configureWithEvent=function(a,d,b,e){this.pageX=a.pageX;this.pageY=a.pageY;"undefiend"!==typeof d&&(this.clientX=d);"undefiend"!==typeof b&&(this.clientY=b);a.target?this.target=a.target:e&&(this.target=e.target);a.currentTarget?this.currentTarget=a.currentTarget:e&&(this.currentTarget=e.currentTarget)};var n={TOUCH:2,PEN:3,MOUSE:4},o=[],k=[],l=[],w=0,x=function(a){if(a=
k[a.pointerId])l[a.identifier]=a,k[a.identifier]=void 0;w--;0===w&&(document.removeEventListener(h?"pointerup":"MSPointerUp",x),document.removeEventListener(h?"pointercancel":"MSPointerCancel",x))},y,z,A,B;t?m?(y=N,z=O,A=P,B=Q):(y=J,z=K,A=L,B=M):(y=G,z=H,B=A=I);f.createCustomEvent=function(a,d,b){var e=document.createEvent("Event");e.initEvent(a,!0,!0);for(var c in b)e[c]=b[c];d.dispatchEvent(e)};f.removePointerListener=function(a,d,b,e){if(d)if(b){var c=D(a,d,b);if(-1===c)console.error("removePointerListener no binding");
else{var f=b.__event_listeners[c];b.__event_listeners.remove(c);a:{switch(d){case p:case q:case r:case s:b=!0;break a}b=!1}b||manageGestureListenerRemove(a,d,f);a.removeEventListener(d,f.handler,e);delete f}}else console.error("removePointerListener no listener")};f.addPointerListener=function(a,d,b,e){if(d)if(b){var c=b;E.isFunction(b)||(c=b.handleEvent,E.isFunction(c)&&(c=c.bind(b)));if(-1!==D(a,d,b))console.error("addPointerListener binding already existing");else{b.__event_listeners||(b.__event_listeners=
[]);var f={target:a,type:d,listener:b};b.__event_listeners.push(f);!R(a,d,c,f)&&!manageGestureListenerAdd(a,d,c,f)&&(f.handler=c);a.addEventListener(d,f.handler,e)}}else console.error("addPointerListener no listener")};f.PointerTypes=n;f.POINTER_START=p;f.POINTER_MOVE=q;f.POINTER_END=r;f.POINTER_CANCEL=s}).call(this);
