(function(){function i(a,d,b){this.configureWithEvent(a);this.type=d;this.identifier=b}function s(a,d){var b=[];a.nbPointers=a.touches.length;for(var e=0;e<a.nbPointers;e++){var c=a.touches[e],c=new i(c,l.TOUCH,c.identifier);b.push(c)}a.pointerList=b;b=[];for(e=0;e<a.targetTouches.length;e++)c=a.targetTouches[e],d&&t[c.identifier]!=d||(c=new i(c,l.TOUCH,c.identifier),b.push(c));a.targetPointerList=b;b=[];for(e=0;e<a.changedTouches.length;e++)c=a.changedTouches[e],c=new i(c,l.TOUCH,c.identifier),b.push(c);
a.changedPointerList=b}function A(a,d){var b=[];b.push(new i(a,l.MOUSE,D));d?(a.nbPointers=0,a.pointerList=[],a.targetPointerList=b,a.changedPointerList=b):(a.nbPointers=1,a.pointerList=b,a.targetPointerList=b,a.changedPointerList=[])}function u(a,d){var b=[],e=[],c=a.pointerId,f=g[c];if(d){f?(j[c]=f,delete g[c]):(f=j[c],f||(f=new i(a,a.pointerType,c),j[c]=f));for(c in j)e.push(j[c]);j={}}else f?f.configureWithEvent(a):(f=new i(a,a.pointerType,c),g[c]=f);for(c in g)b.push(g[c]);a.nbPointers=b.length;
a.pointerList=b;b=[];for(c in g)f=g[c],b.push(f);a.targetPointerList=b;a.changedPointerList=e}function E(a,d){A(a);d(a)}function F(a,d){A(a);d(a)}function G(a,d){A(a,!0);d(a)}function H(a,d,b){for(var e,c=a.targetTouches.length,f=0;f<c;f++)e=a.targetTouches[f],t[e.identifier]=b;s(a);d(a)}function I(a,d,b){s(a,b);d(a)}function J(a,d){for(var b,e=a.targetTouches.length,c=0;c<e;c++)b=a.changedTouches[c],t[b.identifier]=void 0;s(a);d(a)}function K(a,d){s(a);d(a,d)}function L(a,d,b){t[a.pointerId]=b;u(a,
!1,b);d(a);0===v&&(document.addEventListener("MSPointerUp",w),document.addEventListener("MSPointerCancel",w));v++}function M(a,d,b){u(a,!1,b);d(a)}function N(a,d){u(a,!0);d(a)}function O(a,d){u(a,!0);d(a)}function B(a,d,b){if(!d||!b||!b.__event_listeners)return-1;for(var e=0;e<b.__event_listeners.length;e++){var c=b.__event_listeners[e];if(c.target===a&&c.type===d&&c.listener===b)return e}return-1}function P(a,d,b,e){var c=e.listener?e.listener.id:void 0;switch(d){case m:return e.handler=function(a){x(a,
b,c)},!0;case n:return e.handler=function(a){y(a,b,c)},!0;case p:return e.handler=function(a){pointerEndHandler(a,b)},!0;case q:return e.handler=function(a){z(a,b)},!0}return!1}var h=this.vs={util:{isFunction:function(a){return"function"===typeof a}}},C=h.util,r=!1,k=window.navigator.msPointerEnabled;if("undefined"!=typeof document&&"createTouch"in document)r=!0;else if(k)r=!0;else if("undefined"!=typeof document&&(window.navigator&&window.navigator.userAgent)&&(-1!==window.navigator.userAgent.indexOf("Android")||
-1!==window.navigator.userAgent.indexOf("BlackBerry")))r=!0;var m,n,p,q;r?(m=k?"MSPointerDown":"touchstart",n=k?"MSPointerMove":"touchmove",p=k?"MSPointerUp":"touchend",q=k?"MSPointerCancel":"touchcancel"):(m="mousedown",n="mousemove",q=p="mouseup");var D=31337;i.prototype.configureWithEvent=function(a){this.pageX=a.pageX;this.pageY=a.pageY;this.clientX=a.clientX;this.clientY=a.clientY;this.target=a.target;this.currentTarget=a.currentTarget};var l={TOUCH:2,PEN:3,MOUSE:4},t=[],g={},j={},v=0,w=function(a){if(a=
g[a.pointerId])j[a.identifier]=a,delete g[a.identifier];v--;0===v&&(document.removeEventListener("MSPointerUp",w),document.removeEventListener("MSPointerCancel",w))},x,y,z;r?k?(x=L,y=M,pointerEndHandler=N,z=O):(x=H,y=I,pointerEndHandler=J,z=K):(x=E,y=F,z=pointerEndHandler=G);h.createCustomEvent=function(a,d,b){var e=document.createEvent("Event");e.initEvent(a,!0,!0);for(var c in b)e[c]=b[c];d.dispatchEvent(e)};h.removePointerListener=function(a,d,b,e){if(b){var c=B(a,d,b);if(-1===c)console.error("removePointerListener no binding");
else{var f=b.__event_listeners[c];b.__event_listeners.remove(c);a:{switch(d){case m:case n:case p:case q:b=!0;break a}b=!1}b||manageGestureListenerRemove(a,d,f);a.removeEventListener(d,f.handler,e);delete f}}else console.error("removePointerListener no listener")};h.addPointerListener=function(a,d,b,e){if(b){var c=b;C.isFunction(b)||(c=b.handleEvent,C.isFunction(c)&&(c=c.bind(b)));if(-1!==B(a,d,b))console.error("addPointerListener binding already existing");else{b.__event_listeners||(b.__event_listeners=
[]);var f={target:a,type:d,listener:b};b.__event_listeners.push(f);!P(a,d,c,f)&&!manageGestureListenerAdd(a,d,c,f)&&(f.handler=c);a.addEventListener(d,f.handler,e)}}else console.error("addPointerListener no listener")};h.PointerTypes=l;h.POINTER_START=m;h.POINTER_MOVE=n;h.POINTER_END=p;h.POINTER_CANCEL=q}).call(this);
